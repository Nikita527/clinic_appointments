Проектирование → реализация
1. Анализ требований и проектирование
Перед началом разработки были изучены требования ТЗ и выделены основные бизнес-сценарии:

    - Запись пациента к врачу с контролем уникальности (один врач — одна запись на время).
    - Хранение информации о пациентах, врачах и записях.
    - Возможность интеграции с Telegram-ботом и ИИ для подбора врача.
    - Простота развертывания и тестирования (Docker, Makefile, CI/CD).

Принятые проектные решения:

    - Архитектура: выбрана слоистая структура (API → сервисы → репозитории → модели), что облегчает тестирование и расширение.
    - База данных: PostgreSQL, как наиболее популярная и удобная для работы с Python/FastAPI.
    - ORM: SQLAlchemy для декларативного описания моделей и миграций.
    - API: FastAPI для быстрого создания REST-интерфейса и автогенерации документации.
    - Контроль уникальности: реализован на уровне БД через уникальный индекс (doctor_id + start_time).
    - Docker/Compose: для быстрой сборки и запуска окружения.
    - Миграции: Alembic для управления схемой БД.
    - Тестирование: Pytest, разделение на юнит- и интеграционные тесты.
    - CI/CD: GitHub Actions для автоматической проверки стиля и тестов.
    - Документация: подготовлены архитектурная схема, ER-диаграмма, activity-диаграмма, бизнес-процесс, сценарий работы бота.

2. Последовательность шагов

    2.1 Проектирование структуры данных и бизнес-логики
        - Нарисованы ER-диаграмма и архитектурная схема.
        - Описаны основные сущности: User, Doctor, Appointment.
        - Продуман главный сценарий: пациент регистрируется, выбирает врача и время, создаёт запись.

    2.2 Проектирование API
        - Определены эндпоинты: создание и получение записи, регистрация пользователя, получение списка врачей и слотов.
        - Продуманы схемы запросов и ответов.

    2.3 Проектирование инфраструктуры
        - Составлен docker-compose для запуска приложения и БД.
        - Подготовлен Makefile для автоматизации команд.
        - Описаны переменные окружения и пример .env.

    2.4 Реализация
        - Сначала реализованы модели и миграции.
        - Затем — репозитории и сервисный слой.
        - После этого — эндпоинты API.
        - Добавлены тесты (юнит и интеграционные).
        - Настроен CI/CD и линтеры.
        - Подготовлена документация и диаграммы.

    2.5 Проверка и доработка
        - Проведено тестирование всех сценариев.
        - Проверена работа в Docker и CI.
        - Добавлены напоминания и stub-сценарий для бота.

3. Итог
Сначала была спроектирована архитектура, бизнес-логика и структура данных, а только после этого началась реализация кода.
Все ключевые решения и шаги отражены в документации и диаграммах, что подтверждает последовательный подход:
от проектирования — к реализации.
